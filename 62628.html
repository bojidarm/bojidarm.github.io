<!DOCTYPE html>

<html>
	<head>
		<title>VR AR XR Тест 4</title>
		<meta charset="utf-8">
		
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		
		<script src="three.min.js"></script>
		<script src="StereoEffect.js"></script>
		<script src="vax.js"></script>
	</head>
	
	<body>
		<script>
			vaxInit();
			
			camera.position.set( 0, 0, 0 );
			camera.lookAt( new THREE.Vector3(0,-100,0) );
			camera.fov = 30;
			
			onWindowResize();
	
			var geometry = new THREE.BoxGeometry(1024,1024,1024);
			var material = new THREE.MeshLambertMaterial({color:'blue', side:THREE.DoubleSide});
			
			var blueBox = new THREE.Mesh(geometry, material);
			
			scene.add(blueBox);
			
			var coneGeometry = new THREE.ConeGeometry( 3, 20, 32 );
			var coneMaterial;
			var mesh;
			
			var n = 75;
			
			var negz = [];
			for( var i=0; i<n; i++)
			{
				coneMaterial = new THREE.MeshLambertMaterial( {color: THREE.Math.randInt(0, 0xFFFFFF)} );
				mesh = new THREE.Mesh( coneGeometry, coneMaterial );
				mesh.scale.set( 5, 5, 5 );
				mesh.position.set(THREE.Math.randFloat(-497,497), THREE.Math.randFloat(-412,412), -497 );
				negz.push( mesh );
				scene.add( mesh );
			}
			
			/*var posy = [];
			for( var i=0; i<n; i++)
			{	
				coneMaterial = new THREE.MeshLambertMaterial( {color: THREE.Math.randInt(0, 0xFFFFFF)} );
				mesh = new THREE.Mesh(coneGeometry, coneMaterial);
				mesh.scale.set( 5, 5, 5 );
				mesh.position.set(THREE.Math.randFloat(-504,504), 412, THREE.Math.randFloat(-497,497));
				posy.push( mesh );
				scene.add( mesh );
			}
			
			var negy = [];
			for( var i=0; i<n; i++)
			{	
				coneMaterial = new THREE.MeshLambertMaterial( {color: THREE.Math.randInt(0, 0xFFFFFF)} );
				mesh = new THREE.Mesh(coneGeometry, coneMaterial);
				mesh.scale.set( 5, 5, 5 );
				mesh.position.set(THREE.Math.randFloat(-497,497), -412, THREE.Math.randFloat(-497,497));		
				posy.push( mesh );
				scene.add( mesh );
			}
			
			var posz = [];
			for( var i=0; i<n; i++)
			{	
				coneMaterial = new THREE.MeshLambertMaterial( {color: THREE.Math.randInt(0, 0xFFFFFF)} );
				mesh = new THREE.Mesh(coneGeometry, coneMaterial);
				mesh.scale.set( 5, 5, 5 );
				mesh.position.set(THREE.Math.randFloat(-412,412), THREE.Math.randFloat(-512,512) , 497);		
				posy.push( mesh );
				scene.add( mesh );
			}*/
				
			window.addEventListener( "deviceorientation", deviceOrientation, true);
			
			var Alpha, Beta, Gamma;
			
			function deviceOrientation( event )
			{
				Alpha = event.alpha;
				Beta = event.beta;
				Gamma = event.gamma;
				camera.rotation.x = -Gamma * Math.PI/180;
				camera.rotation.y = Beta * Math.PI/180;
				
			}
			
			
		</script>
		
	</body>
</html>


